import{a as u,t as m,c as pt}from"../chunks/Ce9dqvW3.js";import{p as W,f as w,c as o,s as t,r as n,a as X,t as j,J as q,E as P,K as _,I as S}from"../chunks/Ch4HhSdZ.js";import{d as Z,s as vt}from"../chunks/BmlV4D2q.js";import{a as dt}from"../chunks/C1rlqFyW.js";import{p as gt,i as _t}from"../chunks/BS501eKZ.js";import{U as z,t as k,f as x,b as mt,s as E,g as ft}from"../chunks/CXv6ZHf4.js";import{b as bt}from"../chunks/MfDRg49V.js";import{o as ht}from"../chunks/Cd1vMRAD.js";import{g as U,i as yt}from"../chunks/zWxbn14Y.js";import"../chunks/8-ll5k8M.js";import{i as kt}from"../chunks/Dt7Ipir_.js";function G(){U("/signup")}function Q(){U("/login")}var xt=m('<nav class="center-align l m"><button class="round tertiary-container extra"><i>login</i> <span>Login</span></button> <button class="round extra fill"><i>add_circle</i> <span>Sign Up</span></button></nav> <nav class="s vertical"><button class="round tertiary-container responsive"><i>login</i> <span>Login</span></button> <button class="round fill responsive"><i>add_circle</i> <span>Sign Up</span></button></nav>',1);function wt(p,a){W(a,!1),kt();var f=xt(),i=w(f),v=o(i);v.__click=[Q];var A=t(v,2);A.__click=[G],n(i);var l=t(i,2),d=o(l);d.__click=[Q];var b=t(d,2);b.__click=[G],n(l),u(p,f),X()}Z(["click"]);function R(p,a){_(a,!0),setTimeout(function(){_(a,!1)},2e3),navigator.clipboard.writeText(ft("user_id"))}function V(p,a){a.signout(),U("/")}function $(p,a){_(a,!P(a))}var Pt=m('<main class="responsive fixed center middle svelte-vi2h9t"><div class="center-align"><h1 class="svelte-vi2h9t"> </h1> <img alt="your profile icon" class="circle extra margin svelte-vi2h9t" id="user-icon"> <div>Access your API-Key, change your profile picture or logout here!</div></div> <dialog><h3 class="margin">Upload your profile picture</h3> <p class="margin">Click on the button below to upload your own custom profile picture. (Only .png files allowed!)</p> <button class="tertiary-container extra margin svelte-vi2h9t"><i>attach_file</i> <span>File</span> <input type="file" id="photo" accept="image/png"></button> <nav class="center-align"><button class="extra fill svelte-vi2h9t">Cancel</button> <button type="submit" class="extra  svelte-vi2h9t">Confirm</button></nav></dialog> <nav class="center-align l"><button class="round tertiary-container extra svelte-vi2h9t"><i>logout</i> <span>Log out of your account</span></button> <button class="round secondary-container extra svelte-vi2h9t"><i>upload</i> <span>Upload New Profile Picture</span></button> <button class="round extra secondary-container svelte-vi2h9t"><i>content_paste</i> <span>Copy API-Key to Clipboard</span></button></nav> <nav class="center-align s m vertical no-margin"><button class="round tertiary-container responsive svelte-vi2h9t"><i>logout</i> <span>Log out of your account</span></button> <button class="round fill responsive svelte-vi2h9t"><i>content_paste</i> <span>Copy API-Key to Clipboard</span></button> <button class="round secondary-container responsive svelte-vi2h9t"><i>upload</i> <span>Upload Profile Picture</span></button></nav></main>'),At=m(`<main class="responsive fixed center middle center-align svelte-vi2h9t"><h1 class="svelte-vi2h9t">You're not signed in!</h1> <p>Login or Signup now!</p> <!></main>`),Ct=m('<h1 class="svelte-vi2h9t">Error when trying to check auth status!</h1> <h5>Error:</h5> <p>e</p>',1),Ut=m('<progress class="top fixed"></progress> <main class="responsive fixed center middle center-align svelte-vi2h9t"><h1 class="svelte-vi2h9t">Loading Account page...</h1></main>',1),Lt=m(`<!> <div id="api-key-copied"><i>content_paste</i> API-Key successfully
    copied to clipboard!</div> <div>Error uploading profile picture!</div>`,1);function Jt(p,a){W(a,!0);let f="",i=new z,v=S(!1),A=gt(new z().validateLogin()),l=S(!1),d=S(!1);ht(()=>{A||U("/signup")});let b;async function tt(){let r=new FormData;r.append("username",i.username),r.append("user_id",i.apikey),r.append("photo",b.files[0]);try{const e=await fetch(f+"/uploadicon",{method:"POST",body:r});e.ok?(console.log("Image uploaded successfully!"),yt(),_(l,!1),location.reload()):(console.error("Failed to upload image. Status:",e.status),_(d,!0))}catch(e){console.error("Error uploading image:",e),e=!0}setTimeout(()=>{_(d,!1)},5e3)}var T=Lt(),D=w(T);dt(D,()=>A,r=>{var e=Ut(),c=w(e),h=t(c,2);k(3,c,()=>x),k(3,h,()=>x),u(r,e)},(r,e)=>{var c=pt(),h=w(c);{var et=g=>{var s=Pt(),y=o(s),L=o(y),nt=o(L);n(L);var it=t(L,2);q(2),n(y);var C=t(y,2),I=t(o(C),4),rt=t(o(I),4);bt(rt,ut=>b=ut,()=>b),n(I);var O=t(I,2),B=o(O);B.__click=[$,l];var st=t(B,2);st.__click=tt,n(O),n(C);var K=t(C,2),H=o(K);H.__click=[V,i];var J=t(H,2);J.__click=[$,l];var lt=t(J,2);lt.__click=[R,v],n(K);var M=t(K,2),N=o(M);N.__click=[V,i];var Y=t(N,2);Y.__click=[R,v];var ct=t(Y,2);ct.__click=[$,l],n(M),n(s),j(()=>{vt(nt,`Hi ${i.username??""}!`),mt(it,"src",`${f??""}/icons/${i.username??""}.png`),E(C,`${(P(l)?"active":"inactive")??""} center-align max`)}),k(3,s,()=>x),u(g,s)},ot=g=>{var s=At(),y=t(o(s),4);wt(y,{}),n(s),k(3,s,()=>x),u(g,s)};_t(h,g=>{P(e)?g(et):g(ot,!1)})}u(r,c)},(r,e)=>{var c=Ct(),h=w(c);q(4),k(3,h,()=>x),u(r,c)});var F=t(D,2),at=t(F,2);j(()=>{E(F,`snackbar primary absolute center bottom ${(P(v)?"active":"")??""}`),E(at,`snackbar error absolute center bottom ${(P(d)?"active":"")??""}`)}),u(p,T),X()}Z(["click"]);export{Jt as component};
