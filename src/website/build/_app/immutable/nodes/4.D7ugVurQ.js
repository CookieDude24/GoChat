import{a as u,t as m,c as vt}from"../chunks/Ce9dqvW3.js";import{p as X,f as x,c as o,s as t,r as n,a as Z,t as j,J as q,E as w,K as _,I as K}from"../chunks/Ch4HhSdZ.js";import{d as tt,s as dt}from"../chunks/BmlV4D2q.js";import{a as gt}from"../chunks/C1rlqFyW.js";import{p as _t,i as mt}from"../chunks/BS501eKZ.js";import{U as z,t as k,f as S,b as ft,s as E,c as G,g as bt}from"../chunks/dahw8YVr.js";import{b as ht}from"../chunks/MfDRg49V.js";import{o as yt}from"../chunks/Cd1vMRAD.js";import{g as C,i as kt}from"../chunks/jslFWU-5.js";import"../chunks/8-ll5k8M.js";import{i as xt}from"../chunks/Dt7Ipir_.js";function Q(){C("/signup")}function R(){C("/login")}var wt=m('<nav class="center-align l m"><button class="round tertiary-container extra"><i>login</i> <span>Login</span></button> <button class="round extra fill"><i>add_circle</i> <span>Sign Up</span></button></nav> <nav class="s vertical"><button class="round tertiary-container responsive"><i>login</i> <span>Login</span></button> <button class="round fill responsive"><i>add_circle</i> <span>Sign Up</span></button></nav>',1);function Pt(p,a){X(a,!1),xt();var f=wt(),i=x(f),v=o(i);v.__click=[R];var P=t(v,2);P.__click=[Q],n(i);var l=t(i,2),d=o(l);d.__click=[R];var b=t(d,2);b.__click=[Q],n(l),u(p,f),Z()}tt(["click"]);function V(p,a){_(a,!0),setTimeout(function(){_(a,!1)},2e3),navigator.clipboard.writeText(bt("user_id"))}function W(p,a){a.signout(),C("/")}function $(p,a){_(a,!w(a))}var At=m('<main class="responsive fixed center middle svelte-vi2h9t"><div class="center-align"><h1 class="svelte-vi2h9t"> </h1> <img alt="your profile icon" class="circle extra margin svelte-vi2h9t" id="user-icon"> <div>Access your API-Key, change your profile picture or logout here!</div></div> <dialog><h3 class="margin">Upload your profile picture</h3> <p class="margin">Click on the button below to upload your own custom profile picture. (Only .png files allowed!)</p> <button class="tertiary-container extra margin svelte-vi2h9t"><i>attach_file</i> <span>File</span> <input type="file" id="photo" accept="image/png"></button> <nav class="center-align"><button class="extra fill svelte-vi2h9t">Cancel</button> <button type="submit" class="extra  svelte-vi2h9t">Confirm</button></nav></dialog> <nav class="center-align l"><button class="round tertiary-container extra svelte-vi2h9t"><i>logout</i> <span>Log out of your account</span></button> <button class="round secondary-container extra svelte-vi2h9t"><i>upload</i> <span>Upload New Profile Picture</span></button> <button class="round extra secondary-container svelte-vi2h9t"><i>content_paste</i> <span>Copy API-Key to Clipboard</span></button></nav> <nav class="center-align s m vertical no-margin"><button class="round tertiary-container responsive svelte-vi2h9t"><i>logout</i> <span>Log out of your account</span></button> <button class="round fill responsive svelte-vi2h9t"><i>content_paste</i> <span>Copy API-Key to Clipboard</span></button> <button class="round secondary-container responsive svelte-vi2h9t"><i>upload</i> <span>Upload Profile Picture</span></button></nav></main>'),Ct=m(`<main class="responsive fixed center middle center-align svelte-vi2h9t"><h1 class="svelte-vi2h9t">You're not signed in!</h1> <p>Login or Signup now!</p> <!></main>`),Ut=m('<h1 class="svelte-vi2h9t">Error when trying to check auth status!</h1> <h5>Error:</h5> <p>e</p>',1),Lt=m('<progress class="top fixed"></progress> <main class="responsive fixed center middle center-align svelte-vi2h9t"><h1 class="svelte-vi2h9t">Loading Account page...</h1></main>',1),It=m(`<!> <div id="api-key-copied"><i>content_paste</i> API-Key successfully
    copied to clipboard!</div> <div>Error uploading profile picture!</div>`,1);function Mt(p,a){X(a,!0);let f="",i=new z,v=K(!1),P=_t(new z().validateLogin()),l=K(!1),d=K(!1);yt(()=>{P||C("/signup")});let b;async function at(){let r=new FormData;r.append("username",i.username),r.append("user_id",i.apikey),r.append("photo",b.files[0]);try{const e=await fetch(f+"/uploadicon",{method:"POST",body:r});e.ok?(console.log("Image uploaded successfully!"),kt(),_(l,!1),location.reload()):(console.error("Failed to upload image. Status:",e.status),_(d,!0))}catch(e){console.error("Error uploading image:",e),e=!0}setTimeout(()=>{_(d,!1)},5e3)}var T=It(),D=x(T);gt(D,()=>P,r=>{var e=Lt(),c=x(e),h=t(c,2);k(3,c,()=>S),k(3,h,()=>S),u(r,e)},(r,e)=>{var c=vt(),h=x(c);{var ot=g=>{var s=At(),y=o(s),U=o(y),it=o(U);n(U);var rt=t(U,2);q(2),n(y);var A=t(y,2),L=t(o(A),4),st=t(o(L),4);ht(st,pt=>b=pt,()=>b),n(L);var O=t(L,2),B=o(O);B.__click=[$,l];var lt=t(B,2);lt.__click=at,n(O),n(A);var I=t(A,2),H=o(I);H.__click=[W,i];var J=t(H,2);J.__click=[$,l];var ct=t(J,2);ct.__click=[V,v],n(I);var M=t(I,2),N=o(M);N.__click=[W,i];var Y=t(N,2);Y.__click=[V,v];var ut=t(Y,2);ut.__click=[$,l],n(M),n(s),j(()=>{dt(it,`Hi ${i.username??""}!`),ft(rt,"src",`${f??""}/icons/${i.username??""}.png`),E(A,`${(w(l)?"active":"inactive")??""} center-align max`)}),k(3,s,()=>G),u(g,s)},nt=g=>{var s=Ct(),y=t(o(s),4);Pt(y,{}),n(s),k(3,s,()=>G),u(g,s)};mt(h,g=>{w(e)?g(ot):g(nt,!1)})}u(r,c)},(r,e)=>{var c=Ut(),h=x(c);q(4),k(3,h,()=>S),u(r,c)});var F=t(D,2),et=t(F,2);j(()=>{E(F,`snackbar primary absolute center bottom ${(w(v)?"active":"")??""}`),E(et,`snackbar error absolute center bottom ${(w(d)?"active":"")??""}`)}),u(p,T),Z()}tt(["click"]);export{Mt as component};
