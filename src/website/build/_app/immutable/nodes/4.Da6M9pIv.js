import{a as p,t as _,c as vt}from"../chunks/Ce9dqvW3.js";import{p as X,f as x,c as o,s as t,r as i,a as Z,t as j,J as q,E as w,K as m,I as K}from"../chunks/Ch4HhSdZ.js";import{d as tt,s as dt}from"../chunks/BmlV4D2q.js";import{a as gt}from"../chunks/C1rlqFyW.js";import{p as mt,i as _t}from"../chunks/BS501eKZ.js";import{U as z,t as k,f as S,b as ft,s as E,c as G,g as bt}from"../chunks/dahw8YVr.js";import{b as ht}from"../chunks/MfDRg49V.js";import{o as yt}from"../chunks/Cd1vMRAD.js";import{g as A,i as kt}from"../chunks/CLk6TUQJ.js";import"../chunks/8-ll5k8M.js";import{i as xt}from"../chunks/Dt7Ipir_.js";function Q(){A("/signup")}function R(){A("/login")}var wt=_('<nav class="center-align l m"><button class="round tertiary-container extra"><i>login</i> <span>Login</span></button> <button class="round extra fill"><i>add_circle</i> <span>Sign Up</span></button></nav> <nav class="s vertical"><button class="round tertiary-container responsive"><i>login</i> <span>Login</span></button> <button class="round fill responsive"><i>add_circle</i> <span>Sign Up</span></button></nav>',1);function Pt(u,a){X(a,!1),xt();var f=wt(),n=x(f),v=o(n);v.__click=[R];var P=t(v,2);P.__click=[Q],i(n);var l=t(n,2),d=o(l);d.__click=[R];var b=t(d,2);b.__click=[Q],i(l),p(u,f),Z()}tt(["click"]);function V(u,a){m(a,!0),setTimeout(function(){m(a,!1)},2e3),navigator.clipboard.writeText(bt("user_id"))}function W(u,a){a.signout(),A("/")}function $(u,a){m(a,!w(a))}var Ut=_('<main class="responsive fixed center middle svelte-vi2h9t"><div class="center-align"><h1 class="svelte-vi2h9t"> </h1> <img alt="your profile icon" class="circle extra margin svelte-vi2h9t" id="user-icon"> <div>Access your API-Key, change your profile picture or logout here!</div></div> <dialog><h3 class="margin">Upload your profile picture</h3> <p class="margin">Click on the button below to upload your own custom profile picture. (Only .png files allowed!)</p> <p class="margin bold deep-orange-text">Updating the profile picture may take a few minutes (waiting for browser cache invalidation)!</p> <button class="tertiary-container extra margin svelte-vi2h9t"><i>attach_file</i> <span>File</span> <input type="file" id="photo" accept="image/png"></button> <nav class="center-align"><button class="extra fill svelte-vi2h9t">Cancel</button> <button type="submit" class="extra  svelte-vi2h9t">Confirm</button></nav></dialog> <nav class="center-align l"><button class="round tertiary-container extra svelte-vi2h9t"><i>logout</i> <span>Log out of your account</span></button> <button class="round secondary-container extra svelte-vi2h9t"><i>upload</i> <span>Upload New Profile Picture</span></button> <button class="round extra secondary-container svelte-vi2h9t"><i>content_paste</i> <span>Copy API-Key to Clipboard</span></button></nav> <nav class="center-align s m vertical no-margin"><button class="round tertiary-container responsive svelte-vi2h9t"><i>logout</i> <span>Log out of your account</span></button> <button class="round fill responsive svelte-vi2h9t"><i>content_paste</i> <span>Copy API-Key to Clipboard</span></button> <button class="round secondary-container responsive svelte-vi2h9t"><i>upload</i> <span>Upload Profile Picture</span></button></nav></main>'),At=_(`<main class="responsive fixed center middle center-align svelte-vi2h9t"><h1 class="svelte-vi2h9t">You're not signed in!</h1> <p>Login or Signup now!</p> <!></main>`),Ct=_('<h1 class="svelte-vi2h9t">Error when trying to check auth status!</h1> <h5>Error:</h5> <p>e</p>',1),Lt=_('<progress class="top fixed"></progress> <main class="responsive fixed center middle center-align svelte-vi2h9t"><h1 class="svelte-vi2h9t">Loading Account page...</h1></main>',1),It=_(`<!> <div id="api-key-copied"><i>content_paste</i> API-Key successfully
    copied to clipboard!</div> <div>Error uploading profile picture!</div>`,1);function Mt(u,a){X(a,!0);let f="",n=new z,v=K(!1),P=mt(new z().validateLogin()),l=K(!1),d=K(!1);yt(()=>{P||A("/signup")});let b;async function at(){let r=new FormData;r.append("username",n.username),r.append("user_id",n.apikey),r.append("photo",b.files[0]);try{const e=await fetch(f+"/uploadicon",{method:"POST",body:r});e.ok?(console.log("Image uploaded successfully!"),kt(),m(l,!1),location.reload()):(console.error("Failed to upload image. Status:",e.status),m(d,!0))}catch(e){console.error("Error uploading image:",e),e=!0}setTimeout(()=>{m(d,!1)},5e3)}var T=It(),D=x(T);gt(D,()=>P,r=>{var e=Lt(),c=x(e),h=t(c,2);k(3,c,()=>S),k(3,h,()=>S),p(r,e)},(r,e)=>{var c=vt(),h=x(c);{var ot=g=>{var s=Ut(),y=o(s),C=o(y),nt=o(C);i(C);var rt=t(C,2);q(2),i(y);var U=t(y,2),L=t(o(U),6),st=t(o(L),4);ht(st,ut=>b=ut,()=>b),i(L);var O=t(L,2),B=o(O);B.__click=[$,l];var lt=t(B,2);lt.__click=at,i(O),i(U);var I=t(U,2),H=o(I);H.__click=[W,n];var J=t(H,2);J.__click=[$,l];var ct=t(J,2);ct.__click=[V,v],i(I);var M=t(I,2),N=o(M);N.__click=[W,n];var Y=t(N,2);Y.__click=[V,v];var pt=t(Y,2);pt.__click=[$,l],i(M),i(s),j(()=>{dt(nt,`Hi ${n.username??""}!`),ft(rt,"src",`${f??""}/icons/${n.username??""}.png`),E(U,`${(w(l)?"active":"inactive")??""} center-align max`)}),k(3,s,()=>G),p(g,s)},it=g=>{var s=At(),y=t(o(s),4);Pt(y,{}),i(s),k(3,s,()=>G),p(g,s)};_t(h,g=>{w(e)?g(ot):g(it,!1)})}p(r,c)},(r,e)=>{var c=Ct(),h=x(c);q(4),k(3,h,()=>S),p(r,c)});var F=t(D,2),et=t(F,2);j(()=>{E(F,`snackbar primary absolute center bottom ${(w(v)?"active":"")??""}`),E(et,`snackbar error absolute center bottom ${(w(d)?"active":"")??""}`)}),p(u,T),Z()}tt(["click"]);export{Mt as component};
