<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="./gopher.png">

    <title>Chat App</title>

</head>
<body>

<header class="fill top-padding" id="header">

    <h5 class="max left-align">GoChat</h5>

    <button class="fixed right round chip small-elevate max medium tertiary-container" id="go-down-button"
            onclick="scrollToBottom()">
        <span class="right-margin">Jump to newest messages</span>
        <i>arrow_downward</i>
    </button>
</header>

<nav class="m l left " style="overflow-x: hidden;">
    <a onclick="onUserAccountClick()" class="account">

        <div>Your Account</div>
    </a>
    <a onClick="shareButton()">
        <i>share</i>
        <div>Share</div>
    </a>
    <div class="max">

    </div>
    <a onclick="aboutDialog.classList.add('active')">
        <i>info</i>
        <div>About</div>
    </a>
</nav>

<nav class="s bottom">
    <a onclick="onUserAccountClick()" class="account">
        <i>account_circle</i>
    </a>

    <a onClick="shareButton()">
        <i>share</i>
        <div>Share</div>
    </a>
    <a onclick="aboutDialog.classList.add('active')">
        <i>info</i>
        <div>About</div>
    </a>

</nav>
<main class="responsive " id="main" style="overflow-y: hidden;display: flex; flex-direction: column;">
    <div id="chat-box" style="overflow-y: scroll;padding-bottom: 1vh;flex-grow: 1;">

    </div>
    <nav id="message-nav" class="center-align bottom-align" style="padding-bottom: min(1vh,3vw)">
        <div class="field label suffix border round fill large bottom fill" style="width:70%">
            <input type="text" id="message-input">
            <label>Message</label>
        </div>
        <button class="square round small-elevate extra primary right" onclick="sendMessage()">
            <i>send</i>
        </button>
    </nav>
</main>


<dialog class="max" id="username-dialog">
    <main class="responsive absolute center middle" style="padding: 0">
        <h5>Enter Username</h5>
        <div>You need a username to chat!</div>
        <div class="field label large fill round">
            <input type="text" id="username-input">
            <label>Username</label>
        </div>
        <nav class="center-align m l">
            <button class="round border extra"
                    onclick="document.getElementById('username-dialog').classList.remove('active')">
                <i>cancel</i>
                <span>Cancel</span>
            </button>
            <button class="round extra fill"
                    onclick="document.getElementById('login-dialog').classList.add('active')">
                <i>login</i>
                <span>Login</span>
            </button>
            <button onclick="checkUsernameDialog()" class="round extra primary">
                <i>add_circle</i>
                <span>Create User</span>
            </button>
        </nav>
        <nav class="center-align s vertical">
            <button class="round border responsive"
                    onclick="document.getElementById('username-dialog').classList.remove('active')">
                <i>cancel</i>
                <span>Cancel</span>
            </button>
            <button class="round fill responsive"
                    onclick="document.getElementById('login-dialog').classList.add('active')">
                <i>login</i>
                <span>Login</span>
            </button>
            <button onclick="checkUsernameDialog()" class="round primary responsive">
                <i>add_circle</i>
                <span>Create User</span>
            </button>
        </nav>
    </main>
</dialog>

<dialog class="max" id="user-account-dialog">
    <main class="responsive absolute center middle">
        <div class="center-align">
            <h5>Hi <span id="user-account-dialog-span"></span>!</h5>
            <img id="user-account-dialog-picture" class="circle extra margin">
            <div>Access your API-Key or delete your Account here!</div>
        </div>
        <nav class="center-align l">
            <button class="round border extra"
                    onclick="userAccountDialog.classList.remove('active')">
                <i>cancel</i>
                <span>Cancel</span>
            </button>
            <button class="round extra fill" onclick="copyApiKey()">
                <i>content_paste</i>
                <span>Copy API-Key to Clipboard</span>
            </button>
            <button class="round extra tertiary-container" onclick="deleteAccount()">
                <i>delete</i>
                <span>Delete your Account</span>
            </button>
        </nav>
        <nav class="center-align s m vertical">
            <button class="round tertiary-container responsive" onclick="deleteAccount()">
                <i>delete</i>
                <span>Delete your Account</span>
            </button>
            <button class="round fill responsive" onclick="copyApiKey()">
                <i>content_paste</i>
                <span>Copy API-Key to Clipboard</span>
            </button>
            <button class="round border responsive"
                    onclick="userAccountDialog.classList.remove('active')">
                <i>cancel</i>
                <span>Cancel</span>
            </button>
        </nav>

    </main>
</dialog>

<dialog class="max" id="login-dialog">
    <main class="responsive absolute center middle">
        <h5>Login</h5>
        <div class="field label large fill round">
            <input type="text" id="login-username-input">
            <label>Username</label>
        </div>
        <div class="field label large fill round">
            <input type="password" id="login-api-key-input">
            <label>API-Key</label>
        </div>
        <nav class="center-align responsive">
            <button class="round border extra"
                    onclick="document.getElementById('login-dialog').classList.remove('active')">
                <i>cancel</i>
                <span>Cancel</span>
            </button>
            <button class="round extra primary-container" onclick="loginButton()">
                <i>login</i>
                <span>Login</span>
            </button>
        </nav>

    </main>
</dialog>

<dialog class="max" id="progress-dialog">
    <main class="responsive absolute center middle">
        <h5 id="progress-dialog-text"></h5>
        <progress style="margin-top: 5em"></progress>
    </main>
</dialog>
<dialog class="max" id="success-dialog">
    <main class="responsive absolute center middle">
        <h5 id="success-dialog-text">Successfully logged in!</h5>
        <progress style="margin-top: 5em"></progress>
        <i class="center" style="margin-top: 5em; transform: scale(6); color: green">check_circle</i>
    </main>
</dialog>
<dialog class="max" id="about-dialog">
    <main class="responsive absolute center middle">
        <h5>About GoChat</h5>
        <p>
            GoChat was made by Maximilian Dorninger as a Hack Club High Seas project.
            It's a real-time chat app which uses technologies like websockets and GoLang.

        </p>
        <h6>
            Attributions
        </h6>
        <p>The Gopher-Icon was created by Takuya Ueda (https://twitter.com/tenntenn). Licensed under the Creative
            Commons 3.0 Attributions license.</p>
        <button class="round extra fill" onclick="aboutDialog.classList.remove('active')">
            <i>close</i>
            <span>Return</span>
        </button>
    </main>
</dialog>



<div class="snackbar error absolute center bottom" id="username-already-taken-error">Username already taken!</div>
<div class="snackbar primary absolute center bottom" id="share_button_snackbar"><i>content_paste</i> Copied link to
    clipboard!
</div>
<div class="snackbar primary absolute center bottom" id="api-key-copied"><i>content_paste</i> API-Key successfully
    copied to clipboard!
</div>
<div class="snackbar error absolute center bottom" id="failedToLogin">Username or API-Key wrong!</div>
<div class="snackbar primary absolute center bottom" id="deleted-account"><i>delete</i> Successfully deleted Account!
</div>


<link href="https://cdn.jsdelivr.net/npm/beercss@3.8.0/dist/cdn/beer.min.css" rel="stylesheet">

<script type="module" src="https://cdn.jsdelivr.net/npm/beercss@3.8.0/dist/cdn/beer.min.js"></script>
<script type="module"
        src="https://cdn.jsdelivr.net/npm/material-dynamic-colors@1.1.2/dist/cdn/material-dynamic-colors.min.js"></script>
<script src="https://unpkg.com/@jitbit/htmlsanitizer@latest/HtmlSanitizer.js"></script>

</body>

<script src="script.js"></script>
</html>
